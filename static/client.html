<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Pusher2Talk</title>
	<script type="text/javascript" src="http://static.twilio.com/libs/twiliojs/1.0/twilio.js"></script>
	<script src="http://js.pusher.com/1.11/pusher.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
 	
    		Twilio.Device.setup("% token %");
 
    		Twilio.Device.ready(function (device) {
        		$('#status').text('Ready to join conference');
        		Twilio.Device.connect();
    		});
 
    		Twilio.Device.offline(function (device) {
        		$('#status').text('Connection offline');
    		});
 
    		Twilio.Device.error(function (error) {
        		$('#status').text(error);
    		});
 
    		Twilio.Device.connect(function (conn) {
        		$('#status').text("Connected");
    		});
 
    		Twilio.Device.disconnect(function (conn) {
        		$('#status').text("Disconnected");
    		});
			var pusher = new Pusher('400179bcf9b3d8e9327a');
			var channel = pusher.subscribe("% room %");
			channel.bind('talk', function(data) {
					document.getElementById('status').innerHTML = "Answered:"+ data.CallerID;
			   		}
		});
		
	</script>
	</head>
	<body>
		<div id="status">Connection offline</div>
		<button onmousedown="ptt_on()" onmouseup="ptt_off()">TALK</button>
	</body>
